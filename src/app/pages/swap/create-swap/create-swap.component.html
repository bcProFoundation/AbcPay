<ion-header [translucent]="true" class="bp-header">
  <ion-toolbar class="toolbar-desktop" translucent>
    <div class="header-container-desktop">
      <img class="logo-abcpay" src="../../../assets/img/abcpay-logo.svg" alt="">
      <img src="../../../assets/img/abcpay-text.svg" alt="">
    </div>
  </ion-toolbar>
  <ion-toolbar [ngClass]="{'add-box-shadow-scroll': isScroll}">
    <ion-buttons slot="start">
      <!-- <ion-back-button icon="chevron-back-outline" defaultHref="/"></ion-back-button> -->
      <ion-button fill="clear" slot="icon-only" (click)="openSettingPage()">
        <ion-icon slot="end" src="assets/img/home-setting-icon-{{currentTheme}}.svg"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" [forceOverscroll]="true" scrollEvents="true" #scrollArea (ionScroll)="handleScrolling($event)">
  <div class="wrapper">
    <expandable-header [scrollArea]="scrollArea" [fadeFactor]="5" [disableFade]="true" #expandableHeader>
    </expandable-header>

  </div>

  <div class="header-container">
    <div class="header-title">
      {{'Select recipient' | translate}}
    </div>
    <ion-item class="header-search-container">
      <ion-input [placeholder]="'search order' | translate">

      </ion-input>
      <ion-icon  slot="start" src="assets/img/search-{{currentTheme}}.svg">

      </ion-icon>
    </ion-item>
  </div>
  <div class="swap-exchange-rate-container">
    <ng-container *ngIf="coinSwapSelected && coinReceiveSelected">
      <span>1</span>&nbsp; <span>{{coinSwapSelected.code}}</span>
      <img src="assets/img/swap/exchange-sign-{{currentTheme}}.svg">
      <span>{{formatAmountWithLimitDecimal((coinSwapSelected.rate.USD /coinReceiveSelected.rate.USD),8)}}</span>&nbsp; <span> {{coinReceiveSelected.code}}</span>
      <countdown class="count-down" #cd [config]="{leftTime: 10, format: 's'}" (event)="handleEvent($event)"></countdown>
    </ng-container>
  </div>
<div>
  <form>
    
  <div class="address-container">
    <p>Your {{ coinReceiveSelected.code }} address</p>
    <!-- <mat-form-field class="derivation-item" appearance="outline">
      <input #addressSwap matInput [placeholder]="'paste address here'" [(ngModel)]="addressSwapValue" (ngModelChange)="validateAddress()">
    </mat-form-field> -->
    <p>{{ validAddress }}</p>
  </div>
  </form>
  <div class="swap-exchange-container">
    <div class="send-receive-container">
      <div class="title">You send</div>
      <div class="list-coin">
        <ion-item>
          <ion-select value="{{listConfig.coinSwap[0].code}}" (ionChange)="handleCoinSwapChange($event)">
            <ng-container *ngFor="let coin of listConfig.coinSwap">
              <ion-select-option value="{{coin.code}}">{{coin.code}}</ion-select-option>
            </ng-container>
          </ion-select>
        </ion-item>

        <mat-form-field class="derivation-item" appearance="outline">
          <input #inputSwap matInput [placeholder]="'0'" [(ngModel)]="swapValue" (ngModelChange)="validateInput(true)" (keydown)="handleKeyDown(true, $event)">
        </mat-form-field>


        <!-- <p>{{swapAltValue}} {{fiatCode}}</p>       -->
      </div>
    </div>
    <div class="send-receive-container right-part">
      <div>You receive</div>
      <ion-item>
        <ion-select value="{{listConfig.coinReceived[0].code}}" (ionChange)="handleCoinReceiveChange($event)">
          <ng-container *ngFor="let coin of listConfig.coinReceived">
            <ion-select-option value="{{coin.code}}">{{coin.code}}</ion-select-option>
          </ng-container>
        </ion-select>
      </ion-item>

      <mat-form-field class="derivation-item" appearance="outline">
        <input #inputReceive matInput [placeholder]="'0'" [(ngModel)]="receiveValue" (ngModelChange)="validateInput(false)" (keydown)="handleKeyDown(false, $event)">
      </mat-form-field>
      <!-- <ng-container *ngIf="coinReceiveSelected && coinReceiveSelected.rate && coinReceiveSelected.rate[fiatCode]">
        <p>{{receiveAltValue}} {{fiatCode}}</p>
      </ng-container> -->
    </div>
  </div>
  <div class="convert-rate-line">
    {{altValueStr}} {{fiatCode}}
  </div>
  <mat-err *ngIf="!validSwapAmount">You need to deposit at least {{ minWithCurrentFiatStr }} {{fiatCode}} </mat-err>

  <div class="network-fee-line">
    <span>Network fee: </span>
    <span *ngIf="!coinReceiveSelected.isToken">                 
       {{ coinReceiveSelected.networkFee | satToUnit: getChain(coinReceiveSelected.code) }}
    </span>
    <span *ngIf="coinReceiveSelected.isToken">                 
      {{ getFeeToken(coinReceiveSelected.networkFee) }} XEC
   </span>
  </div>

  <div class="address-container">
    <p>Your {{ coinReceiveSelected.code }} address</p>
    <mat-form-field class="derivation-item" appearance="outline">
      <input #addressSwap matInput [placeholder]="'paste address here'" [(ngModel)]="addressSwapValue" (ngModelChange)="validateAddress()">
    </mat-form-field>
    <p>{{ validAddress }}</p>
  </div>
</div>


</ion-content>

<ion-footer class="ion-no-border footer">
  <ion-toolbar>
    <div class="btn-function-group">
      <ion-button class="button-standard">{{ 'Swap' | translate }}</ion-button>
    </div>
  </ion-toolbar>
</ion-footer>